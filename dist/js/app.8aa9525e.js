(function(){"use strict";var t={9563:function(t,e,r){var s=r(7195),i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-content"},[e("link",{attrs:{rel:"preconnect",href:"https://fonts.googleapis.com"}}),e("link",{attrs:{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""}}),e("link",{attrs:{href:"https://fonts.googleapis.com/css2?family=Koulen&display=swap",rel:"stylesheet"}}),t._m(0),e("div",{staticClass:"body"},[e("spinner",{directives:[{name:"show",rawName:"v-show",value:t.fetchingArticles,expression:"fetchingArticles"}]}),t._l(t.articles,(function(t){return e("article-card",{key:t.id,attrs:{article:t}})}))],2)])},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[e("p",{staticClass:"page-title"},[t._v("Hacker News Feed")])])}],o=(r(7658),function(){var t=this,e=t._self._c;return e("div",{staticClass:"box"},[e("article",{staticClass:"media"},[e("div",{staticClass:"media-content align-left"},[e("div",{staticClass:"content"},[e("p",[e("strong",[t._v(t._s(this.$props.article.title))])]),e("div",{staticClass:"article-card-footer"},[e("div",{staticClass:"footer-info"},[e("div",{staticClass:"footer-info-item"},[e("p",[t._v(" Author: "),e("strong",[t._v(t._s(this.$props.article.by))])])]),e("div",{staticClass:"footer-info-item"},[e("p",[t._v(" likes:"),e("strong",[t._v(t._s(this.$props.article.score))])])]),e("div",{staticClass:"footer-info-item"},[e("p",[t._v(" posted: "),e("strong",[t._v(" "+t._s(this.$props.article.time)+" ")])])])]),e("a",{attrs:{href:this.$props.article.url}},[t._v("Read More")])])])])])])}),c=[],a={name:"ArticleCard",props:{article:{title:String,by:String,url:String,score:Number,time:String}}},l=a,f=r(1001),h=(0,f.Z)(l,o,c,!1,null,"37ef613a",null),u=h.exports,p=r(2270),d=r.n(p),g={name:"App",components:{ArticleCard:u,Spinner:d()},data(){return{articles:[],fetchingArticles:!0}},methods:{async checkResponseOk(t){if(!t.ok)throw new Error(`HTTP error: ${t.status}`)},async fetchNewArticleIds(){try{const t=await fetch("https://hacker-news.firebaseio.com/v0/newstories.json?print=pretty");await this.checkResponseOk(t);const e=await t.json();return e.slice(0,10)}catch(t){console.log(`Could not fetch article ids: ${t}`)}},async fetchNewArticles(){const t="https://hacker-news.firebaseio.com/v0/item/",e=".json?print=pretty",r=await this.fetchNewArticleIds(),s=[];try{for(const i of r){const r=await fetch(`${t}${i}${e}`);await this.checkResponseOk(r);const n=await r.json();n.time=this.getPostDate(n),s.push(n)}this.articles=s,this.setArticlesInBrowser(s)}catch(i){console.log(`Could not fetch articles: ${i}`)}},getPostDate(t){let e=new Date(1e3*t.time),r=new Date;return e.getDate()===r.getDate()?`Today at ${e.getHours()}:${e.getMinutes()}`:`${e.getMonth()}.${e.getDate()}.${e.getFullYear()}`},setArticlesInBrowser(t){const e={timestamp:Date.now(),articles:t};localStorage.setItem("fetchedArticles",JSON.stringify(e))},getArticlesFromBrowser(){if(localStorage.fetchedArticles)return JSON.parse(localStorage.getItem("fetchedArticles"))},renderStoredArticles(){if(localStorage.fetchedArticles){const t=this.getArticlesFromBrowser();this.articles=t.articles}},async getArticles(){const t=12e4,e=Date.now(),r=this.getArticlesFromBrowser().timestamp,s=e-r,i=t-s;console.log(i/1e3+"s until the next API call");const n=s>t;!n||i>0?setTimeout((()=>this.getArticles()),i):(await this.fetchNewArticles(),setTimeout((()=>this.getArticles()),t))}},async mounted(){this.getArticlesFromBrowser()||await this.fetchNewArticles(),this.fetchingArticles=!1,this.renderStoredArticles(),await this.getArticles()}},v=g,w=(0,f.Z)(v,i,n,!1,null,null,null),m=w.exports;new s.ZP({render:t=>t(m)}).$mount("#app")}},e={};function r(s){var i=e[s];if(void 0!==i)return i.exports;var n=e[s]={exports:{}};return t[s].call(n.exports,n,n.exports,r),n.exports}r.m=t,function(){var t=[];r.O=function(e,s,i,n){if(!s){var o=1/0;for(f=0;f<t.length;f++){s=t[f][0],i=t[f][1],n=t[f][2];for(var c=!0,a=0;a<s.length;a++)(!1&n||o>=n)&&Object.keys(r.O).every((function(t){return r.O[t](s[a])}))?s.splice(a--,1):(c=!1,n<o&&(o=n));if(c){t.splice(f--,1);var l=i();void 0!==l&&(e=l)}}return e}n=n||0;for(var f=t.length;f>0&&t[f-1][2]>n;f--)t[f]=t[f-1];t[f]=[s,i,n]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var s in e)r.o(e,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,n,o=s[0],c=s[1],a=s[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(i in c)r.o(c,i)&&(r.m[i]=c[i]);if(a)var f=a(r)}for(e&&e(s);l<o.length;l++)n=o[l],r.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return r.O(f)},s=self["webpackChunkhnapp"]=self["webpackChunkhnapp"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=r.O(void 0,[998],(function(){return r(9563)}));s=r.O(s)})();
//# sourceMappingURL=app.8aa9525e.js.map